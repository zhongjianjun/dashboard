webpackJsonp([11],{573:function(e,t,a){"use strict";function Ad(e){var t=e.dispatch,n=e.ad;console.log("AdProps: ",n);var r={breadcrumbs:[{name:"首页"},{name:"广告管理"}]},o={buttonResetLoading:n.buttonResetLoading,buttonSearchLoading:n.buttonSearchLoading,adBlowOptions:n.adBlowOptions,onSearch:function(e){a.i(h.a)(function(){return t(a.i(k.a)(e))})},onReset:function(e){a.i(h.a)(function(){return t(a.i(k.b)(e))})}},l={loading:n.buttonAddLoading,onClick:function(){t(a.i(k.c)())}},u={dataSource:n.tableData,loading:n.tableLoading,onConfirmDelete:function(e){a.i(h.a)(function(){return t(a.i(k.d)(e))})},toggleStatus:function(e,n){a.i(h.a)(function(){return t(a.i(k.e)(e,n))})},onEdit:function(e){t(a.i(k.f)(e))}},d={className:"y-card-pagination",showQuickJumper:!0,showTotal:function(e,t){return"共搜索到 "+n.tableTotals+" 条数据"},defaultCurrent:1,current:n.tableCurrent,defaultPageSize:10,total:n.tableTotals,onChange:function(e){t(a.i(k.g)({tableCurrent:e}))}},p={title:"新增广告",visible:n.modalAddVisible,confirmLoading:n.modalAddConfirmLoading,adBlowOptions:n.adBlowOptions,status:n.status,uploadToken:n.uploadToken,isUpload:n.isUpload,onOk:function(e,n){var r=this;return m()(c.a.mark(function _callee(){return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.i(h.a)(function(){return t(a.i(k.h)(e))});case 2:n();case 3:case"end":return r.stop()}},_callee,r)}))()},onCancel:function(){t(a.i(k.i)())},uploadImg:function(e){t(a.i(k.j)(e))}},g={title:"编辑广告",visible:n.modalEditVisible,modalLoading:n.modalLoading,confirmLoading:n.modalEditConfirmLoading,ad_position_id:n.ad_position_id,img_url:n.img_url,link_url:n.link_url,name:n.name,sort_order:n.sort_order,status:n.status,adBlowOptions:n.adBlowOptions,uploadToken:n.uploadToken,isUpload:n.isUpload,id:n.id,onOk:function(e,n){var r=this;return m()(c.a.mark(function _callee2(){return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.i(h.a)(function(){return t(a.i(k.k)(e))});case 2:n();case 3:case"end":return r.stop()}},_callee2,r)}))()},onCancel:function(){t(a.i(k.i)())},uploadImg:function(e){t(a.i(k.j)(e))}};return f.a.createElement("div",null,f.a.createElement(b.a,r),f.a.createElement(y.a,o),f.a.createElement(i.a,{className:"y-m-b-40"},f.a.createElement(_.a,l),f.a.createElement(E.a,u),f.a.createElement(s.a,d)),f.a.createElement(v.a,p),f.a.createElement(v.a,g))}Object.defineProperty(t,"__esModule",{value:!0});var n=a(599),r=(a.n(n),a(598)),i=a.n(r),o=a(623),l=(a.n(o),a(622)),s=a.n(l),u=a(8),c=a.n(u),d=a(7),m=a.n(d),p=a(0),f=a.n(p),g=a(135),h=a(242),b=(a(12),a(594)),E=a(729),v=a(727),y=a(728),_=a(730),k=a(142);t.default=a.i(g.a)(function(e){return{ad:e.ad}})(Ad)},594:function(e,t,a){"use strict";function newBreadcrumb(e){var t=e.breadcrumbs;return l.a.createElement(i.a,{separator:">",style:{marginBottom:"20px"}},t.map(function(e,t){return l.a.createElement(i.a.Item,{key:t},u.a.isStringNotEmpty(e.href)?l.a.createElement(s.Link,{to:e.href},e.name):e.name)}))}var n=a(605),r=(a.n(n),a(604)),i=a.n(r),o=a(0),l=a.n(o),s=a(73),u=a(12);t.a=newBreadcrumb},602:function(e,t,a){"use strict";var n=a(12);a.d(t,"a",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return l});var r=function(e,t){return n.a.isStringEmpty(e)?"--":e},i=function(e,t){return n.a.isStringEmpty(e)?"--":1===Number(t.status)?"显示":"隐藏"},o=function(e,t){return n.a.isStringEmpty(e)?"--":1===Number(t.type)?"频道":"链接"},l=function(e,t){return n.a.isStringEmpty(e)?"--":1===Number(t.type)?"视频":"图文"}},727:function(e,t,a){"use strict";var n=a(244),r=(a.n(n),a(243)),i=a.n(r),o=a(612),l=(a.n(o),a(611)),s=a.n(l),u=a(607),c=(a.n(u),a(606)),d=a.n(c),m=a(610),p=(a.n(m),a(609)),f=a.n(p),g=a(593),h=(a.n(g),a(597)),b=a.n(h),E=a(596),v=(a.n(E),a(595)),y=a.n(v),_=a(1),k=a.n(_),w=a(601),C=(a.n(w),a(600)),S=a.n(C),x=a(134),I=(a.n(x),a(43)),N=a.n(I),L=a(14),T=(a.n(L),a(13)),F=a.n(T),O=a(240),D=a.n(O),B=a(29),U=a.n(B),V=a(241),M=a.n(V),P=a(31),j=a.n(P),A=a(30),q=a.n(A),R=a(0),z=a.n(R),Q=(a(142),function(e){function newModal(e){U()(this,newModal);var t=j()(this,(newModal.__proto__||D()(newModal)).call(this,e));return t.state={name:"",file:"",previewImage:"",previewVisible:"",isUpload:!0},t.props.img_url&&(t.state.isUpload=!1),t}return q()(newModal,e),M()(newModal,[{key:"componentDidMount",value:function(){console.log("isUpload",this.state.isUpload)}},{key:"handleSubmit",value:function(){var e=this;this.props.form.validateFields(function(t,a){if(console.log("handleSubmit",a),!t){var n="";n=void 0!=a.img_url[0].response?a.img_url[0].response.data.imgPath+a.img_url[0].response.data.message:a.img_url[0].url;var r=e.props.id,i=[];i[0]=a.communitys,e.props.onOk({communitys:i,id:r,ad_position_id:a.ad_position_id,ad_type:a.ad_type,img_url:n,link_url:a.link_url,name:a.name,sort_order:a.sort_order,status:a.status},e.props.form.resetFields)}})}},{key:"handleCancel",value:function(){this.props.onCancel(),this.props.form.resetFields(),this.setState({isUpload:!0})}},{key:"handlePreview",value:function(e){this.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}},{key:"beforeUpload",value:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;if("image/jpg"!==e.type&&!t&&!a)return F.a.error("只能上传.jpeg,.jpg,.png图片"),!1;if(!(e.size/1024/1024<2))return F.a.error("请上传小于 2MB 的图片!"),!1;var n=(new Date).getTime(),r=e.type.split("/");this.setState({name:"jiazhuanghoutai/"+n+"."+r[1],files:e})}},{key:"normFile",value:function(e){return Array.isArray(e)?e:e&&e.fileList}},{key:"handleChange",value:function(e){1==e?this.props.dispatch(actions.showChange("show")):2==e&&this.props.dispatch(actions.showChange("hide"))}},{key:"handImgChange",value:function(e){e.fileList.length?(console.log("success"),this.props.uploadImg(!1)):this.props.uploadImg(!0),"error"==e.file.status&&F.a.error("很遗憾...这次上传失败了。")}},{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:18}},t=z.a.createElement("div",null,z.a.createElement(N.a,{type:"plus"}),z.a.createElement("div",{className:"ant-upload-text"},"选择图片"));return z.a.createElement(i.a,{title:this.props.title,visible:this.props.visible,confirmLoading:this.props.confirmLoading,okText:"确定",cancelText:"取消",onOk:this.handleSubmit.bind(this),onCancel:this.handleCancel.bind(this)},z.a.createElement(s.a,{tip:"获取数据中...",spinning:!!this.props.modalLoading&&this.props.modalLoading},z.a.createElement(y.a,null,z.a.createElement(y.a.Item,k()({label:"广告位置"},e),this.props.form.getFieldDecorator("ad_position_id",{initialValue:this.props.ad_position_id,rules:[{required:!0,message:"请选择广告位置!"}]})(z.a.createElement(S.a,{placeholder:"请选择"},this.props.adBlowOptions.map(function(e,t){return z.a.createElement(S.a.Option,{key:t,value:e.position_id},e.postion_name)})))),z.a.createElement(y.a.Item,k()({label:"广告名称"},e),this.props.form.getFieldDecorator("name",{initialValue:this.props.name,rules:[{required:!0,message:"请输入广告名称!"}]})(z.a.createElement(b.a,{placeholder:"请输入广告名称"}))),z.a.createElement(y.a.Item,k()({label:"广告图片"},e),this.props.form.getFieldDecorator("img_url",{initialValue:this.props.img_url,rules:[{required:!0,message:"请上传广告图片!"}],valuePropName:"fileList",getValueFromEvent:this.normFile,onChange:this.handImgChange.bind(this)})(z.a.createElement(f.a,{action:"http://up.qiniu.com/",listType:"picture-card",onPreview:this.handlePreview.bind(this),beforeUpload:this.beforeUpload.bind(this),data:{token:this.props.uploadToken,key:this.state.name,file:this.state.files}},this.props.isUpload?t:null))),z.a.createElement(y.a.Item,k()({label:"广告链接"},e),this.props.form.getFieldDecorator("link_url",{initialValue:this.props.link_url,rules:[{message:"请输入链接地址!",type:"string"}]})(z.a.createElement(b.a,{placeholder:"请输入链接地址"}))),z.a.createElement(y.a.Item,k()({label:"广告排序"},e),this.props.form.getFieldDecorator("sort_order",{initialValue:this.props.sort_order,rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"请输入正确广告排序!"}]})(z.a.createElement(b.a,{placeholder:"请输入广告排序"}))),z.a.createElement(y.a.Item,k()({},e,{label:"广告状态",required:!0}),this.props.form.getFieldDecorator("status",{rules:[{required:!0,message:"请选择状态"}],initialValue:this.props.status})(z.a.createElement(d.a.Group,null,z.a.createElement(d.a,{value:"1"},"显示"),z.a.createElement(d.a,{value:"2"},"隐藏")))))))}}]),newModal}(z.a.Component));Q=y.a.create({})(Q),t.a=Q},728:function(e,t,a){"use strict";function Search(e){var t=e.form,a=e.onSearch,n=e.onReset,r=e.adBlowOptions,o=e.buttonSearchLoading,l=e.buttonResetLoading,u=(e.reset,{labelCol:{span:9},wrapperCol:{span:15}}),c=function(e){return t.validateFields(function(t,n){e.preventDefault(),t||(console.log("Received values of form: ",n),a(n))})},m=function(){t.resetFields(),n({adNum:"",adName:"",adBlow:"",adStatus:"",tableCurrent:1,tablePageSize:10})};return _.a.createElement(i.a,{className:"y-m-b-20"},_.a.createElement(d.a,{layout:"inline",className:w.a.form},_.a.createElement(d.a.Item,p()({label:"广告编号"},u),t.getFieldDecorator("adNum")(_.a.createElement(h.a,{type:"text",placeholder:"请输入广告编号"}))),_.a.createElement(d.a.Item,p()({label:"广告名称"},u),t.getFieldDecorator("adName")(_.a.createElement(h.a,{type:"text",placeholder:"请输入广告名称"}))),_.a.createElement(d.a.Item,p()({label:"所属广告位"},u,{style:{width:"240px"}}),t.getFieldDecorator("adBlow")(_.a.createElement(v.a,{placeholder:"请选择"},_.a.createElement(C,{key:-1,value:""},"全部"),r.map(function(e,t){return _.a.createElement(C,{key:t,value:e.position_id},e.postion_name)})))),_.a.createElement(d.a.Item,p()({label:"广告状态"},u,{style:{width:"240px"}}),t.getFieldDecorator("adStatus")(_.a.createElement(v.a,{placeholder:"请选择"},_.a.createElement(v.a.Option,{value:""},"全部"),_.a.createElement(v.a.Option,{value:"1"},"显示"),_.a.createElement(v.a.Option,{value:"2"},"隐藏")))),_.a.createElement(d.a.Item,{wrapperCol:{span:15,offset:9}},_.a.createElement(s.a,{type:"primary",onClick:c,loading:o},"搜索"),_.a.createElement(s.a,{className:"y-m-l-10",onClick:m,loading:l},"重置"))))}var n=a(599),r=(a.n(n),a(598)),i=a.n(r),o=a(133),l=(a.n(o),a(90)),s=a.n(l),u=a(596),c=(a.n(u),a(595)),d=a.n(c),m=a(1),p=a.n(m),f=a(593),g=(a.n(f),a(597)),h=a.n(g),b=a(601),E=(a.n(b),a(600)),v=a.n(E),y=a(0),_=a.n(y),k=(a(12),a(811)),w=a.n(k),C=v.a.Option;Search=d.a.create({})(Search),t.a=Search},729:function(e,t,a){"use strict";function NewTable(e){var t=e.loading,a=e.dataSource,n=e.onConfirmDelete,r=e.toggleStatus,o=e.onEdit,l=[{key:"1",title:"广告编号",dataIndex:"serial_no",render:d.a},{key:"2",title:"广告名称",dataIndex:"name",render:d.a},{key:"3",title:"广告位置",dataIndex:"ad_position_name",render:d.a},{key:"4",title:"广告状态",dataIndex:"status",render:function(e,t){return c.a.createElement("span",null,"1"==e?"显示":"隐藏")}},{key:"5",title:"排序",dataIndex:"sort_order",render:d.a},{key:"6",title:"操作",dataIndex:"option",render:function(e,t){return c.a.createElement("span",null,c.a.createElement(s.a,{title:"确定要"+(1===Number(t.status)?"隐藏":"显示")+"吗?",onConfirm:function(){return r(t.id,1===Number(t.status)?2:1)},onCancel:!1,okText:"确定",cancelText:"取消"},c.a.createElement("a",{className:"table-operating"},1===Number(t.status)?"隐藏":"显示")),c.a.createElement("a",{onClick:function(){return o(t.id)},className:"table-operating"},"编辑"),c.a.createElement(s.a,{title:"确定要删除吗?",onConfirm:function(){return n(t.id)},onCancel:!1,okText:"确定",cancelText:"取消"},c.a.createElement("a",{className:"table-operating"},"删除")))}}];return c.a.createElement(i.a,{className:"y-table",rowKey:function(e){return e.id},columns:l,bordered:!0,loading:t,dataSource:a,pagination:!1})}var n=a(617),r=(a.n(n),a(616)),i=a.n(r),o=a(619),l=(a.n(o),a(618)),s=a.n(l),u=a(0),c=a.n(u),d=a(602);t.a=NewTable},730:function(e,t,a){"use strict";function TableHeader(e){var t=e.loading,a=e.onClick;return l.a.createElement(i.a,{type:"primary",loading:t,onClick:a,style:{marginBottom:"20px"}},"新增广告")}var n=a(133),r=(a.n(n),a(90)),i=a.n(r),o=a(0),l=a.n(o);t.a=TableHeader},795:function(e,t,a){t=e.exports=a(41)(!1),t.push([e.i,".form-2YQViZ .ant-form-item{width:240px;margin-bottom:20px}",""]),t.locals={form:"form-2YQViZ"}},811:function(e,t,a){var n=a(795);"string"==typeof n&&(n=[[e.i,n,""]]);a(42)(n,{});n.locals&&(e.exports=n.locals)}});