webpackJsonp([5],{582:function(e,a,t){"use strict";function LiveAdd(e){var a=e.dispatch,n=e.live,r=e.app,l={breadcrumbs:[{name:"首页"},{name:"页面管理"},{name:"直播管理"},{name:"新增"}]},m={uploadToken:r.uploadToken,selectChannels:r.selectChannels,selectColumns:r.selectColumns,selectLabels:r.selectLabels,formChannel:n.formChannel,formColumn:n.formColumn,formLabel:n.formLabel,formTitle:n.formTitle,formMainImage:n.formMainImage,formCommunityName:n.formCommunityName,formAnnouncer:n.formAnnouncer,formDesignImage:n.formDesignImage,formImages:n.formImages,formSort:n.formSort,formStep:n.formStep,formArea:n.formArea,formAreas:n.formAreas,formHome:n.formHome,formHomes:n.formHomes,formType:n.formType,formTypes:n.formTypes,formSteps:n.formSteps,formIsDone:n.formIsDone,formIsHomepage:n.formIsHomepage,formVideoView:n.formVideoView,formVideoIntroduction:n.formVideoIntroduction,formVideoUrl:n.formVideoUrl,buttonOkLoading:n.formAddButtonSubmitLoading,buttonCancelLoading:n.buttonResetLoading,onOk:function(e){t.i(s.a)(function(){return a(t.i(d.e)(e))})},onCancel:function(e){t.i(s.a)(function(){return a(t.i(d.f)(e))})},changeSelectChannels:function(e){},changeSelectColumns:function(e){a(t.i(c.b)(e))},changeFormType:function(e){a(t.i(d.g)(e))},changeFormStep:function(e){a(t.i(d.h)(e))}};return i.a.createElement("div",null,i.a.createElement(u.a,l),i.a.createElement(o.a,{className:"y-m-b-40"},i.a.createElement(p.a,m)))}Object.defineProperty(a,"__esModule",{value:!0});var n=t(599),r=(t.n(n),t(598)),o=t.n(r),l=t(0),i=t.n(l),m=t(135),s=t(242),c=(t(12),t(49)),u=t(594),p=t(639),d=t(140);a.default=t.i(m.a)(function(e){return{app:e.app,live:e.live}})(LiveAdd)},594:function(e,a,t){"use strict";function newBreadcrumb(e){var a=e.breadcrumbs;return i.a.createElement(o.a,{separator:">",style:{marginBottom:"20px"}},a.map(function(e,a){return i.a.createElement(o.a.Item,{key:a},s.a.isStringNotEmpty(e.href)?i.a.createElement(m.Link,{to:e.href},e.name):e.name)}))}var n=t(605),r=(t.n(n),t(604)),o=t.n(r),l=t(0),i=t.n(l),m=t(73),s=t(12);a.a=newBreadcrumb},620:function(e,a,t){"use strict";var n=t(244),r=(t.n(n),t(243)),o=t.n(r),l=t(610),i=(t.n(l),t(609)),m=t.n(i),s=t(134),c=(t.n(s),t(43)),u=t.n(c),p=t(14),d=(t.n(p),t(13)),f=t.n(d),g=t(240),h=t.n(g),v=t(29),y=t.n(v),E=t(241),I=t.n(E),b=t(31),F=t.n(b),V=t(30),C=t.n(V),k=t(0),S=t.n(k),D=t(35),w=(t(140),t(12)),L=function(e){function PicturesWall(e){y()(this,PicturesWall);var a=F()(this,(PicturesWall.__proto__||h()(PicturesWall)).call(this,e));return a.state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleChange=function(e){var t=e.fileList,n=[];a.setState({fileList:t});for(var r=0;r<e.fileList.length;r++)if("done"===e.fileList[r].status&&w.a.isStringNotEmpty(e.fileList[r].url))n.push(e.fileList[r].url);else if("done"===e.fileList[r].status&&e.fileList[r].response){var o=e.fileList[r].response.data;n.push(o.imgPath+o.message)}console.log("urls",e,n),a.props.onChange(n)},a.beforeUpload=a.beforeUpload.bind(a),a.handleCancel=a.handleCancel.bind(a),a.handleChange=a.handleChange.bind(a),a.handlePreview=a.handlePreview.bind(a),a}return C()(PicturesWall,e),I()(PicturesWall,[{key:"setFileList",value:function(e){this.setState({fileList:Array.isArray(e)?e.map(function(e,a){return{uid:-a-1,status:"done",url:e}}):[]})}},{key:"componentDidMount",value:function(){console.log("PicturesWallComponentDidMount",this.props),this.setFileList(this.props.value)}},{key:"componentWillReceiveProps",value:function(e){console.log("PicturesWallComponentWillReceiveProps",this.props,e)}},{key:"componentWillUnmount",value:function(){}},{key:"beforeUpload",value:function(e,a){console.log("beforeUpload",e,a);var t="image/jpeg"===e.type,n="image/png"===e.type,r="image/jpg"===e.type,o=(new Date).getTime(),l=e.type.split("/");return r||t||n?e.size/1024/1024<2?void this.setState({name:"jiazhuanghoutai/"+(this.props.id?this.props.id:"")+"-"+o+"."+l[1],files:e}):(f.a.error("请上传小于 2MB 的图片!"),!1):(f.a.error("只能上传.jpeg,.jpg,.png图片"),!1)}},{key:"render",value:function(){var e=this.state,a=e.previewVisible,t=e.previewImage,n=e.fileList,r=this.props.max?this.props.max:1,l=!!n&&n.length>=r,i=S.a.createElement("div",null,S.a.createElement(u.a,{type:"upload"}),S.a.createElement("div",{className:"ant-upload-text"},"点击上传"));return S.a.createElement("div",{className:"clearfix",style:{minHeight:"104px"}},S.a.createElement(m.a,{action:"http://up.qiniu.com/",data:{token:D.a.getState().app.uploadToken,key:this.state.name,file:this.state.files},listType:"picture-card",fileList:n,beforeUpload:this.beforeUpload,onPreview:this.handlePreview,onChange:this.handleChange,onRemove:this.handleRemove,valuePropName:"fileList",accept:"image/jpeg,image/png,image/jpg,image/gif"},l?null:i),S.a.createElement(o.a,{visible:a,footer:null,onCancel:this.handleCancel},S.a.createElement("img",{alt:"example",style:{width:"100%"},src:t})))}}]),PicturesWall}(S.a.Component);a.a=L},621:function(e,a,t){var n=t(644);"string"==typeof n&&(n=[[e.i,n,""]]);t(42)(n,{});n.locals&&(e.exports=n.locals)},625:function(e,a,t){"use strict";var n=t(133),r=(t.n(n),t(90)),o=t.n(r),l=t(632),i=(t.n(l),t(627)),m=t.n(i),s=t(134),c=(t.n(s),t(43)),u=t.n(c),p=t(593),d=(t.n(p),t(597)),f=t.n(d),g=t(596),h=(t.n(g),t(595)),v=t.n(h),y=t(1),E=t.n(y),I=t(240),b=t.n(I),F=t(29),V=t.n(F),C=t(241),k=t.n(C),S=t(31),D=t.n(S),w=t(30),L=t.n(w),x=t(0),W=t.n(x),_=(t(12),t(620)),P=t(621),A=t.n(P),T=1,U={labelCol:{span:6},wrapperCol:{span:16},style:{maxWidth:"800px"}},q=function(e){function FormStep(e){V()(this,FormStep);var a=D()(this,(FormStep.__proto__||b()(FormStep)).call(this,e));return a.handleAddImage=function(){T++;var e=a.props.form.getFieldValue(a.props.step+"Keys"),t=e.concat(T);console.log(a.props.step,e,t),a.props.setFieldsValue(t)},a.handleRemoveImage=function(e){var t=a.props.form.getFieldValue(a.props.step+"Keys");a.props.setFieldsValue(t.filter(function(a){return a!==e}))},a.handleChangeImage=function(e){return e},a.handleAddImage=a.handleAddImage.bind(a),a.handleRemoveImage=a.handleRemoveImage.bind(a),a.handleChangeImage=a.handleChangeImage.bind(a),a.state={},e.form.getFieldDecorator(a.props.step+"Keys",{initialValue:[]}),console.log("FormStep",e.images),a}return L()(FormStep,e),k()(FormStep,[{key:"setImages",value:function(e){e.images&&e.images.ext.forEach(function(a,t){T++;var n=e.form.getFieldValue(e.step+"Keys"),r=n.concat(T);e.setFieldsValue(r),e.form.getFieldDecorator(e.step+"ImageIntroduction"+T,{initialValue:a.intro}),e.form.getFieldDecorator(e.step+"ImageUpload"+T,{initialValue:a.image?[a.image]:[]}),console.warn("keys\n",n,"\nvalue:",a,a.intro,"\nother:",T,r)})}},{key:"componentDidMount",value:function(){console.log("FormStepComponentDidMount",this.props),this.setImages(this.props)}},{key:"componentWillUnmount",value:function(){console.log("PicturesWallComponentWillUnmount"),this.props.setFieldsValue([])}},{key:"componentWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldValue(this.props.step+"Keys"),t=a.map(function(a,t){return W.a.createElement("div",{key:t},W.a.createElement(v.a.Item,E()({label:"直播图片"},U,{key:a,required:!1}),e.props.form.getFieldDecorator(e.props.step+"ImageUpload"+a,{getValueFromEvent:e.handleChangeImage})(W.a.createElement(_.a,{onChange:e.handleChangeImage}))),W.a.createElement(v.a.Item,{label:"图片说明",labelCol:{span:6},wrapperCol:{span:16}},e.props.form.getFieldDecorator(e.props.step+"ImageIntroduction"+a,{})(W.a.createElement(f.a,{type:"text",placeholder:"请输入文字说明",style:{width:"80%",marginRight:8}})),W.a.createElement(u.a,{className:A.a.delete,type:"minus-circle-o",onClick:function(){return e.handleRemoveImage(a)}})))});return W.a.createElement("div",{style:this.props.style},W.a.createElement(v.a.Item,E()({label:this.props.title},U),this.props.form.getFieldDecorator(this.props.step,{initialValue:!0,rules:[{required:!0,message:"请选择类型!"}]})(W.a.createElement(m.a,{defaultChecked:!0,disabled:!0}))),W.a.createElement(v.a.Item,E()({label:"文字说明"},U),this.props.form.getFieldDecorator(this.props.step+"Introduction",{initialValue:this.props.images?this.props.images.intro:void 0})(W.a.createElement(f.a,{type:"textarea",placeholder:"请输入文字说明"}))),t,W.a.createElement(v.a.Item,{wrapperCol:{span:16,offset:6}},W.a.createElement(o.a,{type:"dashed",onClick:this.handleAddImage,style:{width:"60%"}},W.a.createElement(u.a,{type:"plus"})," 新增图片")),W.a.createElement("hr",{className:A.a.hr}))}}]),FormStep}(W.a.Component);a.a=q},639:function(e,a,t){"use strict";function newForm(e){var a=e.form,t=(e.children,e.buttonOkLoading),n=e.buttonCancelLoading,r=(e.uploadToken,e.selectChannels),l=(e.selectColumns,e.selectLabels),i=(e.selectedChannel,e.selectedColumn,e.selectedLabels,e.onCancel),s=e.onOk,c=(e.changeSelectChannels,e.changeSelectColumns,e.changeFormType),p=e.changeFormStep,d=e.formChannel,g=e.formColumn,h=e.formLabel,y=e.formId,E=e.formTitle,b=e.formMainImage,F=e.formCommunityName,C=e.formAnnouncer,S=e.formDesignImage,L=e.formSort,P=e.formArea,A=e.formAreas,T=e.formHome,U=e.formHomes,q=e.formStep,K=(e.formSteps,e.formType),N=e.formTypes,H=e.formImages,M=e.formIsHomepage,O=e.formIsDone,R=e.formVideoView,j=e.formVideoIntroduction,B=e.formVideoUrl;a.getFieldDecorator("formColumns",{initialValue:[]}),a.getFieldDecorator("formLabels",{initialValue:[]});var z={labelCol:{span:6},wrapperCol:{span:16},style:{maxWidth:"800px"}},X={formItemLayout:z,form:a,formIsDone:O,formVideoUrl:B,formVideoView:R,formVideoIntroduction:j},G={form:a,formImages:H,formStep:q,changeFormStep:p},J=function(e){for(var a=[],t=1;t<6;t++)e["step"+t]&&a.push({type_id:t,live_img_id:function(e){return H[e]?H[e].live_img_id:""}(t-1),intro:e["step"+t+"Introduction"],ext:function(e,a){return e[a+"Keys"].map(function(t,n){return{intro:e[a+"ImageIntroduction"+t],image:function(){var n=e[a+"ImageUpload"+t];return n&&/\//g.test(n)?n[0]:""}()}})}(e,"step"+t)});return a},Z=function(e){return a.validateFields(function(t,n){e.preventDefault(),console.warn("handleOk: ",k()({},n,{formImages:J(n),formMainImage:a.getFieldValue("formMainImage")[0]})),t||s(k()({},n,{formImages:J(n),formMainImage:a.getFieldValue("formMainImage")[0]}))})},Q=function(){a.resetFields(),i(k()({},a.getFieldsValue(),{formType:void 0}))},Y=function(e){var t=r.findIndex(function(a,t){return a.channel_id===e});a.resetFields(["formColumn","formLabel","formColumns","formLabels"]),a.setFieldsValue({formColumns:r[t].columns})},$=function(e){},ee=function(e){e.preventDefault(),c(e.target.value)},ae=function(e){return e};return D.a.createElement(I.a,{layout:"horizontal",className:x.a.form},D.a.createElement(m.a,null,D.a.createElement(u.a,{span:10},D.a.createElement(I.a.Item,k()({},z,{label:"直播类型"}),a.getFieldDecorator("formType",{initialValue:K,rules:[{required:!0,message:"请选择直播类型!"}]})(D.a.createElement(V.a.Group,{onChange:ee},N.map(function(e,a){return D.a.createElement(V.a,{key:a,value:String(e.id),disabled:!!y},e.name)})))),D.a.createElement(I.a.Item,k()({label:"所属频道"},z),a.getFieldDecorator("formChannel",{initialValue:d,rules:[{required:!0,message:"请选择所属频道!"}]})(D.a.createElement(v.a,{placeholder:"请选择一个频道",onChange:Y},r.map(function(e,a){return D.a.createElement(v.a.Option,{key:a,value:String(e.channel_id)},e.channel_name)})))),D.a.createElement(I.a.Item,k()({label:"所属栏目"},z),a.getFieldDecorator("formColumn",{initialValue:g})(D.a.createElement(v.a,{placeholder:"请选择所属栏目",onChange:$},a.getFieldValue("formColumns").map(function(e,a){return D.a.createElement(v.a.Option,{key:a,value:String(e.column_id)},e.column_name)})))),D.a.createElement(I.a.Item,k()({label:"关联标签"},z),a.getFieldDecorator("formLabel",{initialValue:h})(D.a.createElement(v.a,{mode:"multiple",placeholder:"请选择关联标签"},l.map(function(e,a){return D.a.createElement(v.a.Option,{key:a,value:String(e.id)},e.name)})))),D.a.createElement(I.a.Item,k()({label:"户型大小"},z),a.getFieldDecorator("formArea",{initialValue:P,rules:[{required:!0,message:"请选择户型大小!"}]})(D.a.createElement(v.a,{placeholder:"请选择户型大小"},A.map(function(e,a){return D.a.createElement(v.a.Option,{key:a,value:String(e.id)},e.name)})))),D.a.createElement(I.a.Item,k()({label:"房屋户型"},z),a.getFieldDecorator("formHome",{initialValue:T,rules:[{required:!0,message:"请选择房屋户型!"}]})(D.a.createElement(v.a,{placeholder:"请先选择房屋户型"},U.map(function(e,a){return D.a.createElement(v.a.Option,{key:a,value:String(e.id)},e.name)})))),D.a.createElement(I.a.Item,k()({},z,{label:"推荐到首页"}),a.getFieldDecorator("formIsHomepage",{initialValue:M,rules:[{required:!0,message:"请选择是否推荐到首页!"}]})(D.a.createElement(V.a.Group,null,D.a.createElement(V.a,{value:"1"},"是"),D.a.createElement(V.a,{value:"2"},"否")))),D.a.createElement(I.a.Item,k()({label:"设计图"},z),a.getFieldDecorator("formDesignImage",{initialValue:S,getValueFromEvent:ae,rules:[{required:!0,message:"请上传设计图!"}]})(D.a.createElement(w.a,{onChange:ae,max:20}))),D.a.createElement(I.a.Item,k()({label:"直播主图"},z),a.getFieldDecorator("formMainImage",{initialValue:b,getValueFromEvent:ae})(D.a.createElement(w.a,{onChange:ae}))),D.a.createElement(I.a.Item,k()({label:"直播标题"},z),a.getFieldDecorator("formTitle",{initialValue:E,rules:[{required:!0,message:"请选择直播标题!"}]})(D.a.createElement(f.a,{type:"text",placeholder:"请输入直播标题"}))),D.a.createElement(I.a.Item,k()({label:"小区名称"},z),a.getFieldDecorator("formCommunityName",{initialValue:F})(D.a.createElement(f.a,{type:"text",placeholder:"请输入小区名称"}))),D.a.createElement(I.a.Item,k()({label:"发布者"},z),a.getFieldDecorator("formAnnouncer",{initialValue:C,rules:[{required:!0,message:"请输入发布者!"}]})(D.a.createElement(f.a,{type:"text",placeholder:"请输入发布者"}))),D.a.createElement(I.a.Item,k()({label:"排序"},z),a.getFieldDecorator("formSort",{initialValue:L,rules:[{required:!0,message:"请输入排序!"}]})(D.a.createElement(f.a,{type:"text",placeholder:"请输入排序"})))),"1"===K?D.a.createElement(W.a,X):null,"2"===K?D.a.createElement(_.a,G):null),D.a.createElement(I.a.Item,{wrapperCol:{span:21,offset:3}},D.a.createElement(o.a,{type:"primary",onClick:Z,loading:t},"提交"),D.a.createElement(o.a,{className:"y-m-l-10",onClick:Q,loading:n},"取消")))}var n=t(133),r=(t.n(n),t(90)),o=t.n(r),l=t(654),i=(t.n(l),t(635)),m=t.n(i),s=t(628),c=(t.n(s),t(624)),u=t.n(c),p=t(593),d=(t.n(p),t(597)),f=t.n(d),g=t(601),h=(t.n(g),t(600)),v=t.n(h),y=t(596),E=(t.n(y),t(595)),I=t.n(E),b=t(607),F=(t.n(b),t(606)),V=t.n(F),C=t(1),k=t.n(C),S=t(0),D=t.n(S),w=(t(12),t(620)),L=t(621),x=t.n(L),W=(t(625),t(641)),_=t(640);newForm=I.a.create({})(newForm),a.a=newForm},640:function(e,a,t){"use strict";function FormImage(e){var a=e.form,t=e.formStep,n=e.formImages,r=e.changeFormStep;console.log("FormImage",n);var l={form:a,step:"step1",title:"水电改造",images:n[0],style:{display:t>=1?"block":"none"},setFieldsValue:function(e){a.setFieldsValue({step1Keys:e})}},i={form:a,step:"step2",title:"厨卫墙砖",images:n[1],style:{display:t>=2?"block":"none"},setFieldsValue:function(e){a.setFieldsValue({step2Keys:e})}},s={form:a,step:"step3",title:"木工/油漆工",images:n[2],style:{display:t>=3?"block":"none"},setFieldsValue:function(e){a.setFieldsValue({step3Keys:e})}},u={form:a,step:"step4",title:"安装环节",images:n[3],style:{display:t>=4?"block":"none"},setFieldsValue:function(e){a.setFieldsValue({step4Keys:e})}},f={form:a,step:"step5",title:"验房环节",images:n[4],style:{display:5===t?"block":"none"},setFieldsValue:function(e){a.setFieldsValue({step5Keys:e})}},g=function(e){r(e?e/20:0)};return c.a.createElement(o.a,{span:14},c.a.createElement(m.a,{step:20,defaultValue:20*t,className:p.a.slider,onChange:g,marks:{0:"未开工",20:"水电改造",40:"厨卫墙砖",60:"木工/油漆工",80:"安装环节",100:"验房环节"}}),c.a.createElement(d.a,l),c.a.createElement(d.a,i),c.a.createElement(d.a,s),c.a.createElement(d.a,u),c.a.createElement(d.a,f))}var n=t(628),r=(t.n(n),t(624)),o=t.n(r),l=t(656),i=(t.n(l),t(655)),m=t.n(i),s=t(0),c=t.n(s),u=(t(12),t(620),t(621)),p=t.n(u),d=t(625);a.a=FormImage},641:function(e,a,t){"use strict";function FormVideo(e){var a=e.form,t=e.formItemLayout,n=e.formIsDone,r=e.formVideoUrl,l=e.formVideoView,i=e.formVideoIntroduction;return y.a.createElement(o.a,{span:14},y.a.createElement(u.a.Item,d()({label:"是否完工"},t),a.getFieldDecorator("formIsDone",{initialValue:n,rules:[{required:!0,message:"请选择是否完工!"}]})(y.a.createElement(h.a.Group,null,y.a.createElement(h.a,{value:"1"},"是"),y.a.createElement(h.a,{value:"2"},"否")))),y.a.createElement(u.a.Item,d()({label:"直播地址"},t),a.getFieldDecorator("formVideoUrl",{initialValue:r,rules:[{required:!0,message:"请选择直播地址!"}]})(y.a.createElement(m.a,{type:"text",placeholder:"请输入直播地址"}))),y.a.createElement(u.a.Item,d()({label:"浏览量"},t),a.getFieldDecorator("formVideoView",{initialValue:l,rules:[{required:!0,message:"请输入浏览量!"}]})(y.a.createElement(m.a,{type:"text",placeholder:"请输入浏览量"}))),y.a.createElement(u.a.Item,d()({label:"直播说明"},t),a.getFieldDecorator("formVideoIntroduction",{initialValue:i})(y.a.createElement(m.a,{type:"textarea",placeholder:"请输入直播说明"}))))}var n=t(628),r=(t.n(n),t(624)),o=t.n(r),l=t(593),i=(t.n(l),t(597)),m=t.n(i),s=t(596),c=(t.n(s),t(595)),u=t.n(c),p=t(1),d=t.n(p),f=t(607),g=(t.n(f),t(606)),h=t.n(g),v=t(0),y=t.n(v),E=(t(12),t(620),t(621));t.n(E),t(625);a.a=FormVideo},644:function(e,a,t){a=e.exports=t(41)(!1),a.push([e.i,".slider-sHb_Ba{margin-bottom:40px!important;margin-right:10%!important;margin-left:15%!important}.hr-16jbu4{margin-left:16%;margin-right:8%;margin-bottom:20px;border:1px solid #ccc}.delete-Kk8WXv{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;-webkit-transition:all .3s;transition:all .3s}.delete-Kk8WXv:hover{color:#777}.delete-Kk8WXv[disabled]{cursor:not-allowed;opacity:.5}",""]),a.locals={form:"form-1a9Z-v",slider:"slider-sHb_Ba",hr:"hr-16jbu4",delete:"delete-Kk8WXv"}}});