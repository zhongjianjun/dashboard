webpackJsonp([2],{578:function(e,t,n){"use strict";function Channel(e){var t=e.dispatch,a=e.channel;console.log("channelProps: ",a);var r={breadcrumbs:[{name:"页面管理"},{name:"频道管理"}]},o={buttonResetLoading:a.buttonResetLoading,buttonSearchLoading:a.buttonSearchLoading,onSearch:function(e){n.i(p.a)(function(){return t(n.i(k.a)(e))})},onReset:function(e){n.i(p.a)(function(){return t(n.i(k.b)(e))})}},s={dataSource:a.tableData,loading:a.tableLoading,toggleStatus:function(e,a){n.i(p.a)(function(){return t(n.i(k.c)(e,a))})},onEdit:function(e){t(n.i(k.d)(e))},channelEdit:function(e){t(n.i(k.e)(e))},itemEdit:function(e){t(n.i(k.f)(e))}},d={titles:"频道编辑",visible:a.modalEditVisible,modalLoading:a.modalLoading,confirmLoading:a.modalEditConfirmLoading,intro:a.intro,description:a.description,name:a.name,keyword:a.keyword,title:a.title,id:a.id,onOk:function(e,a){var r=this;return c()(l.a.mark(function _callee(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.i(p.a)(function(){return t(n.i(k.g)(e))});case 2:a();case 3:case"end":return r.stop()}},_callee,r)}))()},onCancel:function(){t(n.i(k.h)())}},u={titles:"频道编辑",visible:a.modalEditVisible2,modalLoading:a.modalLoading2,confirmLoading:a.modalEditConfirmLoading2,channelList:a.channelList,channeloption:a.channeloption,id:a.id,onOk:function(e,a){var r=this;return c()(l.a.mark(function _callee2(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.i(p.a)(function(){return t(n.i(k.i)(e))});case 2:a();case 3:case"end":return r.stop()}},_callee2,r)}))()},onCancel:function(){t(n.i(k.j)())}},b={titles:"栏目编辑",visible:a.modalEditVisible3,modalLoading:a.modalLoading3,confirmLoading:a.modalEditConfirmLoading3,channelList:a.ItemlList,id:a.id,onOk:function(e,a){var r=this;return c()(l.a.mark(function _callee3(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.i(p.a)(function(){return t(n.i(k.k)(e))});case 2:a();case 3:case"end":return r.stop()}},_callee3,r)}))()},onCancel:function(){t(n.i(k.l)())},removeitem:function(e,a){var r=this;return c()(l.a.mark(function _callee4(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.i(p.a)(function(){return t(n.i(k.m)(e,a))});case 2:case"end":return r.stop()}},_callee4,r)}))()}};return m.a.createElement("div",null,m.a.createElement(f.a,r),m.a.createElement(y.a,o),m.a.createElement(i.a,{className:"y-m-b-40"},m.a.createElement(h.a,s)),m.a.createElement(g.a,d),m.a.createElement(E.a,u),m.a.createElement(v.a,b))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(604),r=(n.n(a),n(603)),i=n.n(r),o=n(8),l=n.n(o),s=n(7),c=n.n(s),d=n(0),m=n.n(d),u=n(136),p=n(248),f=(n(12),n(602)),h=n(746),g=n(744),E=n(742),v=n(743),y=n(745),k=(n(747),n(142));t.default=n.i(u.a)(function(e){return{channel:e.channel}})(Channel)},602:function(e,t,n){"use strict";function newBreadcrumb(e){var t=e.breadcrumbs;return l.a.createElement(i.a,{separator:">",style:{marginBottom:"20px"}},t.map(function(e,t){return l.a.createElement(i.a.Item,{key:t},c.a.isStringNotEmpty(e.href)?l.a.createElement(s.Link,{to:e.href},e.name):e.name)}))}var a=n(609),r=(n.n(a),n(608)),i=n.n(r),o=n(0),l=n.n(o),s=n(75),c=n(12);t.a=newBreadcrumb},607:function(e,t,n){"use strict";var a=n(12);n.d(t,"a",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return s});var r=function(e){return a.a.isStringEmpty(e)?"--":e},i=function(e,t){return a.a.isStringEmpty(e)?"--":1===Number(t.status)?"显示":"隐藏"},o=function(e,t){return a.a.isStringEmpty(e)?"--":1===Number(t.type)?"频道":"链接"},l=function(e,t){return a.a.isStringEmpty(e)?"--":1===Number(t.type)?"视频":"图文"},s=function(e,t){return a.a.isStringEmpty(e)?"--":1===Number(t.is_reco)?"已推荐":"未推荐"}},667:function(e,t,n){var a=n(823);"string"==typeof a&&(a=[[e.i,a,""]]);n(44)(a,{});a.locals&&(e.exports=a.locals)},742:function(e,t,n){"use strict";var a=n(247),r=(n.n(a),n(246)),i=n.n(r),o=n(621),l=(n.n(o),n(620)),s=n.n(l),c=n(134),d=(n.n(c),n(92)),m=n.n(d),u=n(598),p=(n.n(u),n(601)),f=n.n(p),h=n(600),g=(n.n(h),n(599)),E=n.n(g),v=n(1),y=n.n(v),k=n(135),b=(n.n(k),n(45)),C=n.n(b),x=n(245),L=n.n(x),w=n(19),F=n.n(w),_=n(244),V=n.n(_),I=n(21),S=n.n(I),N=n(20),M=n.n(N),D=n(606),O=(n.n(D),n(605)),q=n.n(O),R=n(0),T=n.n(R),B=n(667),P=n.n(B),z=(n(142),q.a.Option),J=0,$=function(e){function ChannelEditModal(e){F()(this,ChannelEditModal);var t=S()(this,(ChannelEditModal.__proto__||L()(ChannelEditModal)).call(this,e));return t.remove=function(e){var n=t.props.form,a=n.getFieldValue("keys");n.setFieldsValue({keys:a.filter(function(t){return t!==e})})},t.remove2=function(e){var n=t.props.form,a=n.getFieldValue("keys2");console.log(a),n.setFieldsValue({keys2:a.filter(function(t){return t.id!=e})})},t.state={num:[]},console.clear(),t}return M()(ChannelEditModal,e),V()(ChannelEditModal,[{key:"add",value:function(){J++;var e=this.props.form,t=e.getFieldValue("keys"),n=t.concat(J);e.setFieldsValue({keys:n})}},{key:"handleSubmit",value:function(){var e=this;this.props.form.validateFields(function(t,n){if(console.log(n),!t){var a=[];e.props.form.getFieldValue("keys2").map(function(e,t){var r={};r.id=n["name"+e.id],r.sort_order=n["sort_order"+e.id],a.push(r)}),e.props.form.getFieldValue("keys").map(function(e,t){var r={};r.id=n["names"+e],r.sort_order=n["sort_orders"+e],a.push(r)});var r=e.props.id;e.props.onOk({id:r,child_channels:a},e.props.form.resetFields)}})}},{key:"handleCancel",value:function(){this.props.onCancel(),this.props.form.resetFields(),this.setState({num:[]})}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,a=t.getFieldValue,r={labelCol:{span:6},wrapperCol:{span:15}};n("keys2",{initialValue:this.props.channelList});var o=a("keys2"),l=o.map(function(t,n){return T.a.createElement("div",{key:"divname"+n},T.a.createElement(E.a.Item,y()({label:"频道名称"},r),e.props.form.getFieldDecorator("name"+t.id,{initialValue:t.id,rules:[{required:!0,message:"请输入频道名称!"}]})(T.a.createElement(q.a,{placeholder:"请选择",style:{width:"80%",marginRight:"30px"}},e.props.channeloption.map(function(e,t){return T.a.createElement(z,{key:t,value:e.id},e.name)}))),T.a.createElement(C.a,{className:P.a.delete,type:"minus-circle-o",onClick:function(){return e.remove2(t.id)}})),T.a.createElement(E.a.Item,y()({label:"排序"},r),e.props.form.getFieldDecorator("sort_order"+t.id,{initialValue:t.sort_order,rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"请输入正确排序!"}]})(T.a.createElement(f.a,{maxLength:10,placeholder:"请输入排序"}))))});n("keys",{initialValue:[]});var c=a("keys"),d=c.map(function(t,n){return T.a.createElement("div",{key:"divnames"+t},T.a.createElement(E.a.Item,y()({label:"频道名称"},r),e.props.form.getFieldDecorator("names"+t,{initialValue:"",rules:[{required:!0,message:"请输入频道名称!"}]})(T.a.createElement(q.a,{placeholder:"请选择",style:{width:"80%",marginRight:"30px"}},e.props.channeloption.map(function(e,t){return T.a.createElement(z,{key:t,value:e.id},e.name)}))),T.a.createElement(C.a,{className:P.a.delete,type:"minus-circle-o",onClick:function(){return e.remove(t)}})),T.a.createElement(E.a.Item,y()({label:"排序"},r),e.props.form.getFieldDecorator("sort_orders"+t,{initialValue:"",rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"请输入正确排序!"}]})(T.a.createElement(f.a,{maxLength:10,placeholder:"请输入排序"}))))});return T.a.createElement(i.a,{title:this.props.titles,visible:this.props.visible,confirmLoading:this.props.confirmLoading,okText:"确定",cancelText:"取消",onOk:this.handleSubmit.bind(this),onCancel:this.handleCancel.bind(this)},T.a.createElement(s.a,{tip:"获取数据中...",spinning:!!this.props.modalLoading&&this.props.modalLoading},T.a.createElement(E.a,null,l,d,T.a.createElement(E.a.Item,{wrapperCol:{span:16,offset:6}},T.a.createElement(m.a,{type:"dashed",onClick:this.add.bind(this),style:{width:"95%"}},T.a.createElement(C.a,{type:"plus"})," 新增频道")))))}}]),ChannelEditModal}(T.a.Component);$=E.a.create({})($),t.a=$},743:function(e,t,n){"use strict";var a=n(247),r=(n.n(a),n(246)),i=n.n(r),o=n(621),l=(n.n(o),n(620)),s=n.n(l),c=n(134),d=(n.n(c),n(92)),m=n.n(d),u=n(600),p=(n.n(u),n(599)),f=n.n(p),h=n(1),g=n.n(h),E=n(135),v=(n.n(E),n(45)),y=n.n(v),k=n(598),b=(n.n(k),n(601)),C=n.n(b),x=n(245),L=n.n(x),w=n(19),F=n.n(w),_=n(244),V=n.n(_),I=n(21),S=n.n(I),N=n(20),M=n.n(N),D=n(606),O=(n.n(D),n(605)),q=n.n(O),R=n(0),T=n.n(R),B=n(667),P=n.n(B),z=(n(142),q.a.Option,0),J=function(e){function ItemEditModal(e){F()(this,ItemEditModal);var t=S()(this,(ItemEditModal.__proto__||L()(ItemEditModal)).call(this,e));return t.remove=function(e){var n=t.props.form,a=n.getFieldValue("keys");n.setFieldsValue({keys:a.filter(function(t){return t!==e})})},t.remove2=function(e){var n=t.props.form,a=n.getFieldValue("keys2"),r=function(){return n.setFieldsValue({keys2:a.filter(function(t){return t.id!=e})})};t.props.removeitem({id:e},r)},t.state={num:[]},t}return M()(ItemEditModal,e),V()(ItemEditModal,[{key:"add",value:function(){z++;var e=this.props.form,t=e.getFieldValue("keys"),n=t.concat(z);e.setFieldsValue({keys:n})}},{key:"handleSubmit",value:function(){var e=this;this.props.form.validateFields(function(t,n){if(console.log(n),!t){var a=[];e.props.form.getFieldValue("keys2").map(function(e,t){var r={};r.id=e.id,r.name=n["name"+e.id],r.sort_order=n["sort_order"+e.id],a.push(r)}),e.props.form.getFieldValue("keys").map(function(e,t){var r={};r.id="0",r.name=n["names"+e],r.sort_order=n["sort_orders"+e],a.push(r)});var r=e.props.id;e.props.onOk({id:r,columns:a},e.props.form.resetFields)}})}},{key:"handleCancel",value:function(){this.props.onCancel(),this.props.form.resetFields(),this.setState({num:[]})}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.getFieldDecorator,a=t.getFieldValue,r={labelCol:{span:6},wrapperCol:{span:15}};n("keys2",{initialValue:this.props.channelList});var o=a("keys2"),l=o.map(function(t,n){return T.a.createElement("div",{key:"divname"+n},T.a.createElement(f.a.Item,g()({label:"栏目名称"},r),e.props.form.getFieldDecorator("name"+t.id,{initialValue:t.name,rules:[{required:!0,message:"请输入栏目名称!"}]})(T.a.createElement(C.a,{maxLength:20,placeholder:"请输入栏目名称",style:{width:"80%",marginRight:"30px"}})),T.a.createElement(y.a,{className:P.a.delete,type:"minus-circle-o",onClick:function(){return e.remove2(t.id)}})),T.a.createElement(f.a.Item,g()({label:"排序"},r),e.props.form.getFieldDecorator("sort_order"+t.id,{initialValue:t.sort_order,rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"请输入正确排序!"}]})(T.a.createElement(C.a,{maxLength:10,placeholder:"请输入排序"}))))});n("keys",{initialValue:[]});var c=a("keys"),d=c.map(function(t,n){return T.a.createElement("div",{key:"divnames"+t},T.a.createElement(f.a.Item,g()({label:"栏目名称"},r),e.props.form.getFieldDecorator("names"+t,{initialValue:"",rules:[{required:!0,message:"请输入栏目名称!"}]})(T.a.createElement(C.a,{maxLength:20,placeholder:"请输入栏目名称",style:{width:"80%",marginRight:"30px"}})),T.a.createElement(y.a,{className:P.a.delete,type:"minus-circle-o",onClick:function(){return e.remove(t)}})),T.a.createElement(f.a.Item,g()({label:"排序"},r),e.props.form.getFieldDecorator("sort_orders"+t,{initialValue:"",rules:[{required:!0,pattern:/^[0-9]*[1-9][0-9]*$/,message:"请输入正确排序!"}]})(T.a.createElement(C.a,{maxLength:10,placeholder:"请输入排序"}))))});return T.a.createElement(i.a,{title:this.props.titles,visible:this.props.visible,confirmLoading:this.props.confirmLoading,okText:"确定",cancelText:"取消",onOk:this.handleSubmit.bind(this),onCancel:this.handleCancel.bind(this)},T.a.createElement(s.a,{tip:"获取数据中...",spinning:!!this.props.modalLoading&&this.props.modalLoading},T.a.createElement(f.a,null,l,d,T.a.createElement(f.a.Item,{wrapperCol:{span:16,offset:6}},T.a.createElement(m.a,{type:"dashed",onClick:this.add.bind(this),style:{width:"95%"}},T.a.createElement(y.a,{type:"plus"})," 新增栏目")))))}}]),ItemEditModal}(T.a.Component);J=f.a.create({})(J),t.a=J},744:function(e,t,n){"use strict";var a=n(247),r=(n.n(a),n(246)),i=n.n(r),o=n(621),l=(n.n(o),n(620)),s=n.n(l),c=n(600),d=(n.n(c),n(599)),m=n.n(d),u=n(1),p=n.n(u),f=n(598),h=(n.n(f),n(601)),g=n.n(h),E=n(245),v=n.n(E),y=n(19),k=n.n(y),b=n(244),C=n.n(b),x=n(21),L=n.n(x),w=n(20),F=n.n(w),_=n(0),V=n.n(_),I=(n(142),function(e){function newModal(e){return k()(this,newModal),L()(this,(newModal.__proto__||v()(newModal)).call(this,e))}return F()(newModal,e),C()(newModal,[{key:"handleSubmit",value:function(){var e=this;this.props.form.validateFields(function(t,n){if(!t){var a=e.props.id;e.props.onOk({id:a,name:n.name,intro:n.intro,title:n.title,keyword:n.keyword,description:n.description},e.props.form.resetFields)}})}},{key:"handleCancel",value:function(){this.props.onCancel(),this.props.form.resetFields()}},{key:"render",value:function(){var e={labelCol:{span:6},wrapperCol:{span:18}};return V.a.createElement(i.a,{title:this.props.titles,visible:this.props.visible,confirmLoading:this.props.confirmLoading,okText:"确定",cancelText:"取消",onOk:this.handleSubmit.bind(this),onCancel:this.handleCancel.bind(this)},V.a.createElement(s.a,{tip:"获取数据中...",spinning:!!this.props.modalLoading&&this.props.modalLoading},V.a.createElement(m.a,null,V.a.createElement(m.a.Item,p()({label:"频道名称"},e),this.props.form.getFieldDecorator("name",{initialValue:this.props.name,rules:[{required:!0,message:"请输入频道名称!"}]})(V.a.createElement(g.a,{maxLength:10,placeholder:"请输入频道名称"}))),V.a.createElement(m.a.Item,p()({label:"频道说明"},e),this.props.form.getFieldDecorator("intro",{initialValue:this.props.intro,rules:[{type:"string",message:"请输入频道说明!"}]})(V.a.createElement(g.a,{type:"textarea",maxLength:200,rows:4,placeholder:"200字以内，文字，数字，标点符号，字母"}))),V.a.createElement(m.a.Item,p()({label:"页面title"},e),this.props.form.getFieldDecorator("title",{initialValue:this.props.title,rules:[{type:"string",message:"请输入页面title!"}]})(V.a.createElement(g.a,{maxLength:100,rows:4,placeholder:"100字以内，文字，数字，标点符号，字母"}))),V.a.createElement(m.a.Item,p()({label:"keywords"},e),this.props.form.getFieldDecorator("keyword",{initialValue:this.props.keyword,rules:[{type:"string",message:"请输入频道说明!"}]})(V.a.createElement(g.a,{rows:4,placeholder:"文字最多10个词，每个词用，隔开"}))),V.a.createElement(m.a.Item,p()({label:"description"},e),this.props.form.getFieldDecorator("description",{initialValue:this.props.description,rules:[{type:"string",message:"请输入description!"}]})(V.a.createElement(g.a,{type:"textarea",maxLength:500,rows:4,placeholder:"500字以内，文字，数字，标点符号，字母"}))))))}}]),newModal}(V.a.Component));I=m.a.create({})(I),t.a=I},745:function(e,t,n){"use strict";function Search(e){var t=e.form,n=e.onSearch,a=e.onReset,r=(e.adBlowOptions,e.buttonSearchLoading),o=e.buttonResetLoading,l=(e.reset,{labelCol:{span:9},wrapperCol:{span:15}}),c=function(e){return t.validateFields(function(t,a){e.preventDefault(),t||(console.log("Received values of form: ",a),n(a))})},d=function(){t.resetFields(),a({channelnum:"",channelname:""})};return b.a.createElement(i.a,{className:"y-m-b-20"},b.a.createElement(m.a,{layout:"inline",className:x.a.form},b.a.createElement(m.a.Item,p()({label:"频道编号"},l),t.getFieldDecorator("channelnum")(b.a.createElement(g.a,{type:"text",placeholder:"请输入频道编号"}))),b.a.createElement(m.a.Item,p()({label:"频道名称"},l),t.getFieldDecorator("channelname")(b.a.createElement(g.a,{type:"text",placeholder:"请输入频道名称"}))),b.a.createElement(m.a.Item,{wrapperCol:{span:15,offset:9}},b.a.createElement(s.a,{type:"primary",onClick:c,loading:r},"搜索"),b.a.createElement(s.a,{className:"y-m-l-10",onClick:d,loading:o},"重置"))))}var a=n(604),r=(n.n(a),n(603)),i=n.n(r),o=n(134),l=(n.n(o),n(92)),s=n.n(l),c=n(600),d=(n.n(c),n(599)),m=n.n(d),u=n(1),p=n.n(u),f=n(598),h=(n.n(f),n(601)),g=n.n(h),E=n(606),v=(n.n(E),n(605)),y=n.n(v),k=n(0),b=n.n(k),C=(n(12),n(843)),x=n.n(C);y.a.Option;Search=m.a.create({})(Search),t.a=Search},746:function(e,t,n){"use strict";function NewTable(e){var t=e.loading,n=e.dataSource,a=e.toggleStatus,r=e.onEdit,o=e.channelEdit,s=e.itemEdit,c=[{key:"1",title:"频道编号",dataIndex:"serial_no",render:p.a},{key:"2",title:"频道名称",dataIndex:"name",render:p.a},{key:"3",title:"关联模板",dataIndex:"template_name",render:p.a},{key:"4",title:"包含栏目",dataIndex:"columns",render:function(e,t){return u.a.createElement("div",{style:{maxWidth:"200px"}},e.map(function(e,t){return u.a.createElement("span",{style:{marginLeft:"5px"}}," ",e.name," ")}))}},{key:"5",title:"状态",dataIndex:"status",render:function(e,t){return u.a.createElement("span",null,"1"==e?"启用":"禁用")}},{key:"6",title:"操作",dataIndex:"option",render:function(e,t){return u.a.createElement("span",null,"site"!=t.name_el?u.a.createElement(d.a,{title:"确定要"+(1===Number(t.status)?"禁用":"启用")+"吗?",onConfirm:function(){return a(t.id,1===Number(t.status)?2:1)},onCancel:!1,okText:"确定",cancelText:"取消"},u.a.createElement("a",{className:"table-operating"},1===Number(t.status)?"禁用":"启用")):"",u.a.createElement("a",{onClick:function(){return r(t.id)},className:"table-operating"},"编辑"),"site"==t.name_el?u.a.createElement("a",{onClick:function(){return o(t.id)},className:"table-operating"},"频道管理"):"","1"==t.has_column?u.a.createElement("a",{onClick:function(){return s(t.id)},className:"table-operating"},"编辑栏目"):"")}}];return u.a.createElement(i.a,{className:"y-table",rowKey:function(e){return l()(e)},columns:c,bordered:!0,loading:t,dataSource:n,pagination:!1})}var a=n(627),r=(n.n(a),n(626)),i=n.n(r),o=n(253),l=n.n(o),s=n(629),c=(n.n(s),n(628)),d=n.n(c),m=n(0),u=n.n(m),p=n(607);t.a=NewTable},747:function(e,t,n){"use strict";var a=n(134),r=(n.n(a),n(92)),i=(n.n(r),n(0));n.n(i)},823:function(e,t,n){t=e.exports=n(43)(!1),t.push([e.i,".slider-ZnprxL{margin-bottom:40px;margin-right:10%;margin-left:15%}.hr-2UCyOB{margin-left:16%;margin-right:8%;margin-bottom:20px;border:1px solid #ccc}.delete-CqJzhP{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;transition:all .3s}.delete-CqJzhP:hover{color:#777}.delete-CqJzhP[disabled]{cursor:not-allowed;opacity:.5}",""]),t.locals={form:"form-nIU25Z",slider:"slider-ZnprxL",hr:"hr-2UCyOB",delete:"delete-CqJzhP"}},824:function(e,t,n){t=e.exports=n(43)(!1),t.push([e.i,".form-2r3qtt .ant-form-item{width:240px;margin-bottom:20px}",""]),t.locals={form:"form-2r3qtt"}},843:function(e,t,n){var a=n(824);"string"==typeof a&&(a=[[e.i,a,""]]);n(44)(a,{});a.locals&&(e.exports=a.locals)}});